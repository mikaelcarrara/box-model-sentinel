<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ASCII to HTML Renderer - Demo</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #1e1e1e;
      color: #cccccc;
    }

    .demo-container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      color: #569cd6;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #858585;
      margin-bottom: 30px;
    }

    .demo-section {
      margin-bottom: 40px;
      background: #252526;
      padding: 20px;
      border-radius: 6px;
      border: 1px solid #3e3e42;
    }

    .demo-section h2 {
      color: #4ec9b0;
      margin-top: 0;
      font-size: 18px;
    }

    .theme-toggle {
      margin-bottom: 20px;
    }

    .theme-toggle button {
      padding: 8px 16px;
      background: #0e639c;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .theme-toggle button:hover {
      background: #1177bb;
    }

    .comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }

    .comparison-item h3 {
      font-size: 14px;
      color: #dcdcaa;
      margin-top: 0;
      margin-bottom: 10px;
    }

    pre {
      background: #1e1e1e;
      padding: 12px;
      border-radius: 4px;
      overflow-x: auto;
      font-family: 'Courier New', Consolas, Monaco, monospace;
      font-size: 12px;
      line-height: 1.2;
    }

    .stats {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      font-size: 13px;
    }

    .stat {
      background: #2d2d30;
      padding: 10px 15px;
      border-radius: 4px;
    }

    .stat-label {
      color: #858585;
      font-size: 11px;
      text-transform: uppercase;
    }

    .stat-value {
      color: #4ec9b0;
      font-size: 18px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="demo-container">
    <h1>ASCII to HTML Renderer</h1>
    <p class="subtitle">Interactive demonstration of styled ASCII visualizations</p>

    <div class="theme-toggle">
      <button onclick="toggleTheme()">Toggle Theme (Current: <span id="current-theme">Dark</span>)</button>
    </div>

    <div class="demo-section">
      <h2>Example 1: Fixed Dimensions Issue</h2>
      <div id="demo1"></div>
    </div>

    <div class="demo-section">
      <h2>Example 2: Viewport Overflow</h2>
      <div id="demo2"></div>
    </div>

    <div class="demo-section">
      <h2>Example 3: Flex Fragility</h2>
      <div id="demo3"></div>
    </div>

    <div class="demo-section">
      <h2>Comparison: Raw ASCII vs Styled HTML</h2>
      <div class="comparison">
        <div class="comparison-item">
          <h3>Raw ASCII</h3>
          <pre id="raw-ascii"></pre>
        </div>
        <div class="comparison-item">
          <h3>Styled HTML</h3>
          <div id="styled-html"></div>
        </div>
      </div>
    </div>

    <div class="demo-section">
      <h2>Performance Stats</h2>
      <div class="stats">
        <div class="stat">
          <div class="stat-label">Render Time</div>
          <div class="stat-value" id="render-time">-</div>
        </div>
        <div class="stat">
          <div class="stat-label">Characters</div>
          <div class="stat-value" id="char-count">-</div>
        </div>
        <div class="stat">
          <div class="stat-label">Lines</div>
          <div class="stat-value" id="line-count">-</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Mock AsciiToHtmlRenderer for demo
    class AsciiToHtmlRenderer {
      constructor(options = {}) {
        this.options = {
          fontSize: options.fontSize || 12,
          fontFamily: options.fontFamily || 'Courier New, Consolas, Monaco, monospace',
          theme: options.theme || 'dark',
          enableHover: options.enableHover !== false,
          enableTooltips: options.enableTooltips !== false,
          enableCopyButton: options.enableCopyButton !== false,
        };
        this._stylesCache = null;
      }

      render(asciiText) {
        const startTime = performance.now();
        
        // Simple rendering for demo
        const lines = asciiText.split('\n');
        const html = `
          <div class="ascii-visualization" data-theme="${this.options.theme}">
            ${this.options.enableCopyButton ? '<button class="ascii-copy-btn" onclick="copyToClipboard(this)">Copy ASCII</button>' : ''}
            <div class="ascii-content">
              ${lines.map((line, i) => `<div class="ascii-line">${this.escapeHtml(line)}</div>`).join('')}
            </div>
          </div>
        `;
        
        const renderTime = performance.now() - startTime;
        return { html, renderTime, charCount: asciiText.length, lineCount: lines.length };
      }

      escapeHtml(text) {
        const map = { '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#039;' };
        return text.replace(/[&<>"']/g, m => map[m]);
      }

      getStyles() {
        if (this._stylesCache) return this._stylesCache;
        
        const isDark = this.options.theme === 'dark';
        const colors = isDark ? {
          bg: '#1e1e1e', text: '#d4d4d4', buttonBg: '#2d2d30', buttonHover: '#3e3e42'
        } : {
          bg: '#ffffff', text: '#333333', buttonBg: '#f3f3f3', buttonHover: '#e5e5e5'
        };

        this._stylesCache = `
          .ascii-visualization {
            position: relative;
            background-color: ${colors.bg};
            color: ${colors.text};
            font-family: ${this.options.fontFamily};
            font-size: ${this.options.fontSize}px;
            line-height: 1.2;
            padding: 12px;
            border-radius: 4px;
            animation: ascii-fade-in 0.2s ease-in;
          }
          @keyframes ascii-fade-in {
            from { opacity: 0; transform: translateY(-2px); }
            to { opacity: 1; transform: translateY(0); }
          }
          .ascii-line { white-space: pre; }
          .ascii-copy-btn {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 4px 8px;
            font-size: 11px;
            background-color: ${colors.buttonBg};
            color: ${colors.text};
            border: 1px solid #858585;
            border-radius: 3px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
          }
          .ascii-copy-btn:hover { opacity: 1; background-color: ${colors.buttonHover}; }
        `;
        return this._stylesCache;
      }

      setTheme(theme) {
        this.options.theme = theme;
        this._stylesCache = null;
      }
    }

    // Demo data
    const examples = {
      fixedDimensions: `Fixed Dimensions â€¢ âš ï¸ Medium â€¢ L42
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ANTES                  DEPOIS             â”‚
â”‚  width: 600px          max-width: 100%     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚         â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  âŒ Fixed width        âœ… Responsive       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`,

      viewportOverflow: `Viewport Overflow â€¢ ðŸš« Critical â€¢ L15
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ANTES                  DEPOIS             â”‚
â”‚  width: 100vw          width: 100%         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â–“        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ content  â”‚â–“        â”‚ content  â”‚        â”‚
â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚â–“        â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â–“        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  â–“ = scrollbar         sem overflow       â”‚
â”‚  âŒ Horizontal scroll   âœ… Perfect fit     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`,

      flexFragility: `Flex Fragility â€¢ âš ï¸ Medium â€¢ L28
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ANTES                  DEPOIS             â”‚
â”‚  flex-wrap: nowrap     flex-wrap: wrap     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–º   â”‚   â”‚ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆ   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â–ˆâ–ˆ â–ˆâ–ˆ         â”‚  â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  âŒ Overflow           âœ… Wraps nicely     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜`
    };

    // Initialize
    let currentTheme = 'dark';
    let renderer = new AsciiToHtmlRenderer({ theme: currentTheme });

    function renderDemo() {
      const styles = renderer.getStyles();
      const styleTag = document.getElementById('dynamic-styles') || document.createElement('style');
      styleTag.id = 'dynamic-styles';
      styleTag.textContent = styles;
      if (!document.getElementById('dynamic-styles')) {
        document.head.appendChild(styleTag);
      }

      // Render examples
      const result1 = renderer.render(examples.fixedDimensions);
      document.getElementById('demo1').innerHTML = result1.html;

      const result2 = renderer.render(examples.viewportOverflow);
      document.getElementById('demo2').innerHTML = result2.html;

      const result3 = renderer.render(examples.flexFragility);
      document.getElementById('demo3').innerHTML = result3.html;

      // Comparison
      document.getElementById('raw-ascii').textContent = examples.fixedDimensions;
      document.getElementById('styled-html').innerHTML = result1.html;

      // Stats
      document.getElementById('render-time').textContent = result1.renderTime.toFixed(2) + 'ms';
      document.getElementById('char-count').textContent = result1.charCount;
      document.getElementById('line-count').textContent = result1.lineCount;
    }

    function toggleTheme() {
      currentTheme = currentTheme === 'dark' ? 'light' : 'dark';
      renderer.setTheme(currentTheme);
      document.getElementById('current-theme').textContent = currentTheme === 'dark' ? 'Dark' : 'Light';
      document.body.style.background = currentTheme === 'dark' ? '#1e1e1e' : '#ffffff';
      document.body.style.color = currentTheme === 'dark' ? '#cccccc' : '#333333';
      renderDemo();
    }

    function copyToClipboard(button) {
      const ascii = button.parentElement.querySelector('.ascii-content').textContent;
      navigator.clipboard.writeText(ascii).then(() => {
        button.textContent = 'âœ“ Copied!';
        setTimeout(() => button.textContent = 'Copy ASCII', 1000);
      });
    }

    // Initial render
    renderDemo();
  </script>
</body>
</html>
